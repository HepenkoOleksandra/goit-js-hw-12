{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/render-function.js","../src/js/pixabay-api.js","../src/js/scroll.js","../src/js/show-hide-loader.js","../src/js/notification.js","../src/js/last-page.js","../src/main.js"],"sourcesContent":["export const refs = {\n    form: document.querySelector('.search-images'),\n    input: document.querySelector('.query-images'),\n    galleryList: document.querySelector('.gallery'),\n    loadElem: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('.js-btn-load')\n}","import { lightBox } from \"../main\";\nimport { refs } from \"./refs\";\n\nexport function galleryTemplate(element) {\n    const {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = element;\n    return `\n   <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <ul class=\"gallery-body\">\n        <li class=\"gallery-info\">\n          <h3>Likes:</h3>\n          <p>${likes}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Views:</h3>\n          <p>${views}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Comments:</h3>\n          <p>${comments}</p>\n        </li>\n        <li class=\"gallery-info\">\n          <h3>Downloads:</h3>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n    </li>`\n}\n\nexport function renderGallery(elements) {\n    const markup = elements.hits.map((element)=>{return galleryTemplate(element)})\n        .join('\\n');\n       \n    refs.galleryList.insertAdjacentHTML('beforeend', markup);\n    \n    lightBox.refresh();   \n}","import axios from 'axios';\nimport { page, per_page, query } from '../main';\n\nexport async function getGallery() {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    \n    const url = `${BASE_URL}${END_POINT}`;\n     \n    const response = await axios.get(url, {\n        params: {\n        key: \"42112521-3ff4dfc201bab0977369cd2bc\",\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',  \n        page: page,\n        per_page: per_page\n        }\n    });\n       \n    return response.data;\n}\n// fetch","export function scroll() {\n  const elemImg = document.querySelector('.gallery-item');\n  const heightScroll = elemImg.getBoundingClientRect().height;\n  \n  window.scrollBy({\n    top: heightScroll * 2,\n    behavior: \"smooth\"\n  });\n}","import { refs } from \"./refs\";\n\nexport function showLoader() {\n  refs.loadElem.classList.remove('hidden');\n  refs.btnLoadMore.classList.add('hidden');\n}\n\nexport function hideLoader() {\n  refs.loadElem.classList.add('hidden');\n  refs.btnLoadMore.classList.remove('hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport function checkQuery() {\n    iziToast.show({\n      message: 'Please enter a search query name!',\n      messageColor: 'white',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n}\n\nexport function checkDataHitsLength() {\n    iziToast.show({\n      message: 'Please enter a search query name!',\n      messageColor: 'white',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n} \n\nexport function checkIsLastPage() {\n    iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageColor: 'white',\n        backgroundColor: 'red',\n        position: 'topRight',\n      });\n}","import { page, per_page, totalPages } from \"../main\";\nimport { checkIsLastPage } from \"./notification\";\nimport { refs } from \"./refs\";\n\nexport function checkLastPage() {\n  \n  const maxPage = Math.ceil(totalPages / per_page);\n  \n  const isLastPage = maxPage <= page;\n  \n  if (isLastPage) {\n    refs.btnLoadMore.classList.add('hidden');\n    checkIsLastPage()\n  } else {\n    refs.btnLoadMore.classList.remove('hidden');\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { renderGallery } from \"./js/render-function\";\nimport { refs } from \"./js/refs\";\nimport { getGallery } from \"./js/pixabay-api\";\nimport { scroll } from \"./js/scroll\";\nimport { hideLoader, showLoader } from \"./js/show-hide-loader\";\nimport { checkDataHitsLength, checkQuery } from \"./js/notification\";\nimport { checkLastPage } from \"./js/last-page\";\n\nexport let lightBox = new SimpleLightbox('.gallery-link', {\n  captionsData: \"alt\",\n  captionDelay: 500\n});\n\nexport let page = 1;\nexport const per_page = 15;\nexport let query = '';\nexport let totalPages = 0;\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onBtnLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  page = 1;\n  query = e.target.elements.query.value.trim();\n    \n  if (query === '') {\n    checkQuery()      \n    return;\n  }\n\n  refs.galleryList.innerHTML = '';\n  \n  showLoader()\n  \n  try {\n    const data = await getGallery();\n    totalPages = data.totalHits;\n   \n    if (data.hits.length === 0) {\n      checkDataHitsLength()\n      refs.btnLoadMore.classList.add('hidden');\n      \n    } else {\n      renderGallery(data);\n      checkLastPage()\n    }\n\n  } catch (error) {\n    console.log(error);\n  }\n  \n  hideLoader()\n  \n  e.target.reset();\n}\n\nasync function onBtnLoadMoreClick(e) {\n  e.preventDefault();\n  page += 1;\n  \n  showLoader()\n\n  try {\n    const data = await getGallery(query);\n    \n    renderGallery(data);\n   \n    hideLoader()\n    \n    checkLastPage()\n    \n  } catch (error) {\n    console.log(error.message);\n  }\n    \n  scroll()\n}\n\n \n"],"names":["refs","galleryTemplate","element","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","elements","markup","lightBox","getGallery","url","axios","query","page","per_page","scroll","heightScroll","showLoader","hideLoader","checkQuery","iziToast","checkDataHitsLength","checkIsLastPage","checkLastPage","totalPages","SimpleLightbox","onFormSubmit","onBtnLoadMoreClick","e","data","error"],"mappings":"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"}